@model IEnumerable<HospitalSystem.Models.Bill>

@{
    ViewBag.Title = "Index";
}
@if (User.IsInRole(HospitalSystem.Models.MyConstants.RoleAdmin))
{
    @Html.Partial("~/Views/Admins/Header.cshtml");
}
else if (User.IsInRole(HospitalSystem.Models.MyConstants.RolePatient))
{
    @Html.Partial("~/Views/Patients/Header.cshtml");

}

<section id="doktor-yonetimi">
    <div class="container">
        <h2>Bills</h2> 
        <ul class="responsive-table">
            @if (Model.Count() == 0)
            {
                <p> No record</p>
            }
            else
            {
                <li class="table-header">
                    <div class="col col-1">@Html.DisplayNameFor(model => model.CurAppointment.AppointmentDate)</div>
                    <div class="col col-4">İşlemler</div>
                </li>
                foreach (var item in Model)
                {
                    <li class="table-row">
                        <div class="col col-1" data-label="Job Id">@Html.DisplayFor(modelItem => item.CurAppointment.AppointmentDate)</div>

                        <div class="col col-4" data-label="Operation">
                              @Html.ActionLink("Pay it", "Payment", new { id = item.Id }, new { @class = "delete" })
                          
                        </div>
                    </li>
                }
            }
        </ul>

    </div>
</section>




<script>
     function gettoken() {
        var token = '@Html.AntiForgeryToken()';
        token = $(token).val();
        return token;
    }


    $('.delete').click(function (event) {//linke click eventi kazandırma
        event.preventDefault();
        if (confirm("Do you sure delete this department")) {
            $.ajax({
                url: this.href,
                data: {
                    __RequestVerificationToken: gettoken()
                },
                type: 'POST',
                success: function (result) {
                    location.reload();
                }
            });
        }

    });


</script>

